<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Allows you to create a timestamp list from movies/series, by using the Open Movie Database api (omdbapi.com).">
    <title>Timestamp imposter</title>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/elm-.css">
    <link rel="icon" href="amongE.png">
    <link rel="apple-touch-icon" href="amongE.png">
    <script>
        const setTheme = bool => {
            const {
                classList
            } = document.documentElement
            if (bool)
                classList.add('light')
            else
                classList.remove('light')
        }
        const mediaQueryLightFunc = mediaQuery => {
            if (localStorage.getItem('theme'))
                return
            setTheme(mediaQuery.matches)
        }
        const themeFunc = () => {
            const {
                classList
            } = document.documentElement
            const val = !classList.contains('light')
            setTheme(val)
            localStorage.setItem('theme', val)
        }

        const mediaQueryLight = matchMedia('(prefers-color-scheme: light)')
        mediaQueryLightFunc(mediaQueryLight)
        mediaQueryLight.addEventListener('change', mediaQueryLightFunc)

        if (localStorage.getItem('theme') === 'true')
            setTheme(true)
        else if (localStorage.getItem('theme') === 'false')
            setTheme(false)

    </script>
</head>

<body>
    <header>
        <div>
            <h1>
                <a href="." class="h1-link">
                    <svg width="28" height="28" viewBox="0 0 28 28" fill="currentColor">
                        <path
                            d="M 14.75,27.310674 C 12.339953,26.680863 12.54607,23.931466 15.052469,23.276028 18.144496,22.467445 17.27021,18.5 14,18.5 c -1.821434,0 -2.510101,0.543177 -2.537214,2.001197 -0.02047,1.100659 -0.384526,2.563159 -0.809017,3.25 C 9.5788065,25.490522 2.3548337,25.367065 1.6758898,23.597766 1.0136132,21.8719 1.8018354,21 4.0243422,21 5.3406535,21 6.0784448,19.189694 7.3539927,12.830093 9.3565113,2.8459765 11.033091,0 14.912269,0 19.359103,0 22.145191,2.9248272 23.070822,8.5648276 25.576483,23.832166 23.067639,29.484301 14.75,27.310674 Z M 2.5348318,23.056359 c -1.68988787,3.295761 -0.8449439,1.64788 0,0 z M 14.75,16.207498 c -2.971649,-0.367774 -3.400869,-1.156629 -1.60595,-2.951548 0.858734,-0.858734 0.584188,-0.997643 -1.100865,-0.556992 -1.820732,0.476132 -2.1673962,0.229369 -1.83466,-1.30595 0.22564,-1.041154 0.967002,-1.7735174 1.647469,-1.6274733 0.680468,0.1460441 1.689985,-1.0332836 2.243371,-2.6207281 C 14.652751,5.557362 16.094279,3.7808275 17.302761,3.1969521 18.778516,2.4839443 19.007461,2.0857738 18,1.9843469 17.175,1.9012895 15.49529,1.7216107 14.26731,1.5850609 12.520373,1.3908036 12.272758,1.6237272 13.129186,2.6556593 14.579129,4.4027341 13.388423,7.3630297 11.523596,6.6474281 9.7044253,5.9493469 9.4020572,6.4644746 8.5270315,11.752507 7.9245845,15.393269 8.0518457,15.917335 9.4116786,15.395519 10.407653,15.013327 11,15.320741 11,16.219818 c 0,1.064362 0.8374,1.291339 3.25,0.880909 3.184046,-0.541666 3.194193,-0.559793 0.5,-0.893229 z M 18.979944,8.475834 C 18.284224,7.6375427 17.509063,7.1576037 17.257364,7.4093029 16.563866,8.1028004 17.972907,10 19.181462,10 19.844555,10 19.768693,9.426218 18.979944,8.475834 Z" />
                    </svg>
                    Timestamp imposter
                </a>
            </h1>
            <h2>Instructions</h2>
            <ol>
                <li>Click, Generate button</li>
                <li>Click, Format button</li>
            </ol>
            Save the list with this <a data-const="listLink" href="#" target="_blank" rel="noopener noreferrer">link</a>
        </div>
        <button class="toggle-theme" data-const="toggleTheme"><span>â˜€</span></button>
    </header>
    <main>
        <section class="list-wrapper">
            <button class="add" data-const="add">+</button>
            <button data-const="updateAll">Update all</button>
            <button data-const="removeAll">Remove all</button>
            <div class="elm-wrapper" data-const="elmWrapper">
                <elm-></elm->
            </div>
            <button class="add" data-const="add2">+</button>
        </section>
        <div class="wrapper">
            <section class="split-wrapper">
                <button data-const="generate">Generate</button>
                <label class="io">Input: <textarea cols="30" rows="10" data-const="textarea"></textarea></label>
                <label class="ta">Split: <textarea data-const="split"></textarea></label>
            </section>
            <section class="output-wrapper">
                <button data-const="format">Format</button>
                <label class="io">Output: <textarea cols="30" rows="15" data-const="output"></textarea></label>
            </section>
            <section class="config-wrapper">
                <h3>Format config</h3>
                <div>
                    Preset:
                    <select data-const="preset">
                        <option value="time">Time</option>
                        <option value="rating">Rating</option>
                        <option value="rating + time">Rating + Time</option>
                        <option value="blank">Blank</option>
                    </select>
                </div>
                <div>
                    <label class="time-label">Start time: <input type="time" data-const="startTime"></label>
                    <button data-const="clearTime">Clear</button>
                    <span data-const="currentTime"></span>
                </div>
                <div>
                    <label>Timezone: <input type="number" class="timezone-input" data-const="timezoneInput" max="14"
                            min="-12" step=".25"></label>
                    <button data-const="timezoneReset">Reset</button>
                    <span data-const="timezoneSpan"></span>
                </div>
                <label>Offset in min: <input type="number" value="0" class="offset" data-const="offset"></label>
                <label class="io custom-format-wrapper">
                    <span>Custom format: </span>
                    <textarea data-const="customFormatInput"></textarea>
                </label>
                <label class="ta">Join: <textarea data-const="join"></textarea></label>
                <label class="io"><span>Start: </span><textarea data-const="startInput"></textarea></label>
                <label class="ta">Tail: <textarea data-const="tail"></textarea></label>
                <label>Stream Elements current time: <input type="checkbox" data-const="streamElementsCurTimeCheck"
                        checked></label>
                <label>Square brackets: <input type="checkbox" data-const="squareBrackets"></label>
                <label>IMDb rating: <input type="checkbox" data-const="imdbCheck" checked></label>
                <label>Rotten Tomatoes: <input type="checkbox" data-const="tomatoCheck" checked></label>
                <label>Metacritic: <input type="checkbox" data-const="metacriticCheck" checked></label>
                <button data-const="clearStorage">Clear storage</button>
            </section>
            <section class="var-list">
                <h3>Custom format vars</h3>
                <div>
                    <code>${time}</code> 12:34
                </div>
                <div>
                    <code>${timeStr}</code> (12:34) or [12:34]
                </div>
                <div>
                    <code>${text}</code> from generate
                </div>
                <div>
                    <code>${titleStr}</code> title, season & episode (Sherlock S01E01)
                </div>
                <div>
                    <code>${search}</code> from search input
                </div>
                <div>
                    <code>${baseStr}</code> short for <code>${text || titleStr || f.Title || search}</code>
                </div>
                <div>
                    <code>${ratingStr}</code> {5.5 55% 55} is {imdb tomato metacritic}
                </div>
                <h4>Advanced:</h4>
                <div>
                    <p>You can access the Date object with <code>${d}</code>.</p>
                    <p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date"
                            target="_blank" rel="noopener noreferrer">Reference</a>. Recommended
                        <code>${d.toJSON()}</code>.</p>
                </div>
            </section>
            <section>
                <form data-const="suggestionForm" name="suggestion" netlify>
                    <label class="io">
                        Suggestion:
                        <textarea name="text" id="text" cols="30" rows="10"></textarea>
                    </label>
                    <button type="submit">Submit</button>
                </form>
            </section>
            <section class="api-wrapper">
                <h2>Api</h2>
                <p>Should the api key expire, you can register for a free key at <a href="https://www.omdbapi.com"
                        target="_blank" rel="noopener noreferrer">omdbapi.com</a>.</p>
                <p>You can either set the key here: <input type="text" data-const="apikeyElm" placeholder="api key"></p>
                <p>Or you can add <a href="?apikey=KEY" target="_blank" rel="noopener noreferrer"
                        data-const="keyLink">?apikey=<span data-const="keyPlaceholder">KEY</span></a> to the url.</p>
            </section>
        </div>
    </main>
    <footer>
        <a href="https://github.com/oska1204/timestamp-imposter" target="_blank" rel="noopener noreferrer">
            <svg aria-hidden="true" role="img" viewBox="0 0 16 16" width="32" height="32" fill="currentColor"
                style="display:inline-block;user-select:none;vertical-align:text-bottom;overflow:visible">
                <path fill-rule="evenodd"
                    d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                </path>
            </svg>
        </a>
    </footer>
    <script src="scripts/data-const.js"></script>
    <script src="scripts/elements.js"></script>
    <script src="scripts/functions.js"></script>
    <script src="scripts/theme.js"></script>
    <script src="scripts/get-storage.js"></script>
    <script src="scripts/set-storage.js"></script>
    <script src="scripts/api.js"></script>
    <script src="scripts/send-data.js"></script>
    <script src="scripts/basic.js"></script>
    <script src="scripts/elm-.js"></script>
</body>

</html>
